<!DOCTYPE html>
<html>
<head>
  <title>Test Products Display</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .test-container {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 2rem;
    }
    #decor-products, #food-products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>Product Display Test</h1>
    <div id="decor-products"></div>
  </div>
  
  <script src="ui-utils.js"></script>
  <script>
    // Create mock product data with different image aspect ratios
    const mockProducts = [
      {
        _id: '1',
        name: 'Tall Portrait Product',
        price: 29.99,
        stock: 5,
        description: 'This has a tall portrait image (600x800)',
        images: ['https://via.placeholder.com/600x800/52b788/ffffff?text=Portrait+600x800'],
        type: 'decor'
      },
      {
        _id: '2',
        name: 'Wide Landscape Product',
        price: 39.99,
        stock: 10,
        description: 'This has a wide landscape image (800x400)',
        images: ['https://via.placeholder.com/800x400/ff8c42/ffffff?text=Landscape+800x400'],
        type: 'decor'
      },
      {
        _id: '3',
        name: 'Square Product',
        price: 19.99,
        stock: 3,
        description: 'This has a square image (600x600)',
        images: ['https://via.placeholder.com/600x600/2d6a4f/ffffff?text=Square+600x600'],
        type: 'decor'
      }
    ];
    
    function escapeHtml(text) {
      return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }
    
    function productToCard(p) {
      const stock = p.stock || 0;
      const stockClass = stock === 0 ? 'out-of-stock' : stock <= 5 ? 'low-stock' : '';
      const stockText = stock === 0 ? 'Out of Stock' : stock <= 5 ? `Low Stock: ${stock} left` : `Stock: ${stock}`;
      const isOutOfStock = stock === 0;
      
      const imageUrl = p.images && p.images[0] ? p.images[0] : '/img/default-product.png';
      
      return `
        <div class="product-card">
          <div class="product-top-section">
            <img src="${imageUrl}" alt="${escapeHtml(p.name)}" class="product-img" loading="lazy">
            <div class="product-info">
              <div class="product-title">${escapeHtml(p.name)}</div>
              <div class="product-price">$${p.price.toFixed(2)}</div>
              <div class="product-stock ${stockClass}">${stockText}</div>
            </div>
          </div>
          <div class="product-bottom-section">
            <div class="product-desc">${escapeHtml(p.description)}</div>
            <button class="add-to-cart" ${isOutOfStock ? 'disabled' : ''}>
              ${isOutOfStock ? 'Out of Stock' : 'Add to Cart'}
            </button>
          </div>
        </div>
      `;
    }
    
    document.getElementById('decor-products').innerHTML = mockProducts.map(productToCard).join('');
  </script>
</body>
</html>
